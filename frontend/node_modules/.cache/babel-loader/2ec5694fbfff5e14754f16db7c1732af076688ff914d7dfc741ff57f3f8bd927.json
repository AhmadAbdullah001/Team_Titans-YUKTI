{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{getAllPropertiesOnChain,getPropertyHistoryOnChain,getPropertyOwnerOnChain,verifyPropertyOnChain}from\"../contract/propertyActions.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PropertyExplorer(){const[rows,setRows]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const load=async()=>{setLoading(true);setError(\"\");try{const hashes=await getAllPropertiesOnChain();const details=await Promise.all((hashes||[]).map(async hash=>{try{const[owner,verified,history]=await Promise.all([getPropertyOwnerOnChain(hash),verifyPropertyOnChain(hash),getPropertyHistoryOnChain(hash)]);return{hash,owner,verified:Boolean(verified),history:history||[]};}catch(_unused){return{hash,owner:\"-\",verified:false,history:[]};}}));setRows(details);}catch(e){setError((e===null||e===void 0?void 0:e.message)||\"Failed to load properties from blockchain.\");}finally{setLoading(false);}};load();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-slate-100 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-6xl space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-xl bg-white p-6 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-slate-800\",children:\"Property Explorer\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"On-chain property listing and ownership history.\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700\",children:\"Back to Dashboard\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-xl bg-white p-6 shadow-xl\",children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"Loading properties from blockchain...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-rose-700\",children:error}):rows.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"No properties registered on-chain yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:rows.map(row=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl border border-slate-200 p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"break-all font-mono text-xs text-slate-700\",children:row.hash}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 break-all text-sm text-slate-700\",children:[\"Owner: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-xs\",children:row.owner})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-slate-700\",children:[\"Verified:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:row.verified?\"font-semibold text-emerald-700\":\"font-semibold text-amber-700\",children:row.verified?\"Yes\":\"No\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-semibold text-slate-700\",children:\"Transfer History\"}),row.history.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:\"No transfer records.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 space-y-1\",children:row.history.map((record,index)=>/*#__PURE__*/_jsxs(\"p\",{className:\"break-all font-mono text-[11px] text-slate-600\",children:[record.from,\" -> \",record.to,\" at\",\" \",record.timestamp?new Date(record.timestamp*1000).toLocaleString():\"-\"]},\"\".concat(row.hash,\"-\").concat(index)))})]})]},row.hash))})})]})});}export default PropertyExplorer;","map":{"version":3,"names":["React","useEffect","useState","Link","getAllPropertiesOnChain","getPropertyHistoryOnChain","getPropertyOwnerOnChain","verifyPropertyOnChain","jsx","_jsx","jsxs","_jsxs","PropertyExplorer","rows","setRows","loading","setLoading","error","setError","load","hashes","details","Promise","all","map","hash","owner","verified","history","Boolean","_unused","e","message","className","children","to","length","row","record","index","from","timestamp","Date","toLocaleString","concat"],"sources":["C:/Users/ahmad/OneDrive/Desktop/evault/frontend/src/pages/PropertyExplorer.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  getAllPropertiesOnChain,\n  getPropertyHistoryOnChain,\n  getPropertyOwnerOnChain,\n  verifyPropertyOnChain,\n} from \"../contract/propertyActions.js\";\n\nfunction PropertyExplorer() {\n  const [rows, setRows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    const load = async () => {\n      setLoading(true);\n      setError(\"\");\n      try {\n        const hashes = await getAllPropertiesOnChain();\n        const details = await Promise.all(\n          (hashes || []).map(async (hash) => {\n            try {\n              const [owner, verified, history] = await Promise.all([\n                getPropertyOwnerOnChain(hash),\n                verifyPropertyOnChain(hash),\n                getPropertyHistoryOnChain(hash),\n              ]);\n              return { hash, owner, verified: Boolean(verified), history: history || [] };\n            } catch {\n              return { hash, owner: \"-\", verified: false, history: [] };\n            }\n          })\n        );\n        setRows(details);\n      } catch (e) {\n        setError(e?.message || \"Failed to load properties from blockchain.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    load();\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-slate-100 p-4\">\n      <div className=\"mx-auto max-w-6xl space-y-6\">\n        <div className=\"rounded-xl bg-white p-6 shadow-xl\">\n          <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-slate-800\">Property Explorer</h1>\n              <p className=\"text-sm text-slate-500\">On-chain property listing and ownership history.</p>\n            </div>\n            <Link\n              to=\"/home\"\n              className=\"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700\"\n            >\n              Back to Dashboard\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"rounded-xl bg-white p-6 shadow-xl\">\n          {loading ? (\n            <p className=\"text-sm text-slate-500\">Loading properties from blockchain...</p>\n          ) : error ? (\n            <p className=\"text-sm text-rose-700\">{error}</p>\n          ) : rows.length === 0 ? (\n            <p className=\"text-sm text-slate-500\">No properties registered on-chain yet.</p>\n          ) : (\n            <div className=\"space-y-4\">\n              {rows.map((row) => (\n                <div key={row.hash} className=\"rounded-xl border border-slate-200 p-4\">\n                  <p className=\"break-all font-mono text-xs text-slate-700\">{row.hash}</p>\n                  <p className=\"mt-1 break-all text-sm text-slate-700\">\n                    Owner: <span className=\"font-mono text-xs\">{row.owner}</span>\n                  </p>\n                  <p className=\"mt-1 text-sm text-slate-700\">\n                    Verified:{\" \"}\n                    <span className={row.verified ? \"font-semibold text-emerald-700\" : \"font-semibold text-amber-700\"}>\n                      {row.verified ? \"Yes\" : \"No\"}\n                    </span>\n                  </p>\n                  <div className=\"mt-2\">\n                    <p className=\"text-xs font-semibold text-slate-700\">Transfer History</p>\n                    {row.history.length === 0 ? (\n                      <p className=\"text-xs text-slate-500\">No transfer records.</p>\n                    ) : (\n                      <div className=\"mt-1 space-y-1\">\n                        {row.history.map((record, index) => (\n                          <p key={`${row.hash}-${index}`} className=\"break-all font-mono text-[11px] text-slate-600\">\n                            {record.from} -> {record.to} at{\" \"}\n                            {record.timestamp ? new Date(record.timestamp * 1000).toLocaleString() : \"-\"}\n                          </p>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PropertyExplorer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}