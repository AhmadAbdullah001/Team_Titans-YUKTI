{"ast":null,"code":"import React,{useState}from\"react\";import WalletStatus from\"../components/WalletStatus.js\";import{getOwnershipHistory}from\"../utils/evault.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function OwnershipTimeline(){const[propertyId,setPropertyId]=useState(\"\");const[records,setRecords]=useState([]);const[message,setMessage]=useState(\"\");const[loading,setLoading]=useState(false);const handleLoadHistory=async()=>{try{if(!propertyId){setMessage(\"Enter property ID.\");return;}setLoading(true);const history=await getOwnershipHistory(Number(propertyId));setRecords(history);setMessage(\"\");}catch(error){setRecords([]);setMessage(error.message||\"Failed to load ownership history.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-grid\",children:[/*#__PURE__*/_jsx(WalletStatus,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ownership Timeline\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",placeholder:\"Property ID\",value:propertyId,onChange:e=>setPropertyId(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLoadHistory,disabled:loading,children:loading?\"Loading...\":\"Load Timeline\"}),message?/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message}):null,records.length>0?/*#__PURE__*/_jsx(\"ol\",{className:\"timeline\",children:records.map((record,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Owner: \",/*#__PURE__*/_jsx(\"code\",{children:record.owner})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Timestamp: \",record.readableTime]})]},\"\".concat(record.owner,\"-\").concat(record.timestamp,\"-\").concat(index)))}):/*#__PURE__*/_jsx(\"p\",{children:\"No records found for this property.\"})]})]});}export default OwnershipTimeline;","map":{"version":3,"names":["React","useState","WalletStatus","getOwnershipHistory","jsx","_jsx","jsxs","_jsxs","OwnershipTimeline","propertyId","setPropertyId","records","setRecords","message","setMessage","loading","setLoading","handleLoadHistory","history","Number","error","className","children","type","min","placeholder","value","onChange","e","target","onClick","disabled","length","map","record","index","owner","readableTime","concat","timestamp"],"sources":["C:/Users/ahmad/OneDrive/Desktop/evault/frontend/src/pages/OwnershipTimeline.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport WalletStatus from \"../components/WalletStatus.js\";\nimport { getOwnershipHistory } from \"../utils/evault.js\";\n\nfunction OwnershipTimeline() {\n  const [propertyId, setPropertyId] = useState(\"\");\n  const [records, setRecords] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleLoadHistory = async () => {\n    try {\n      if (!propertyId) {\n        setMessage(\"Enter property ID.\");\n        return;\n      }\n      setLoading(true);\n      const history = await getOwnershipHistory(Number(propertyId));\n      setRecords(history);\n      setMessage(\"\");\n    } catch (error) {\n      setRecords([]);\n      setMessage(error.message || \"Failed to load ownership history.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"page-grid\">\n      <WalletStatus />\n      <section className=\"card\">\n        <h2>Ownership Timeline</h2>\n        <input\n          type=\"number\"\n          min=\"1\"\n          placeholder=\"Property ID\"\n          value={propertyId}\n          onChange={(e) => setPropertyId(e.target.value)}\n        />\n        <button onClick={handleLoadHistory} disabled={loading}>\n          {loading ? \"Loading...\" : \"Load Timeline\"}\n        </button>\n        {message ? <p className=\"message\">{message}</p> : null}\n        {records.length > 0 ? (\n          <ol className=\"timeline\">\n            {records.map((record, index) => (\n              <li key={`${record.owner}-${record.timestamp}-${index}`}>\n                <p>\n                  Owner: <code>{record.owner}</code>\n                </p>\n                <p>Timestamp: {record.readableTime}</p>\n              </li>\n            ))}\n          </ol>\n        ) : (\n          <p>No records found for this property.</p>\n        )}\n      </section>\n    </div>\n  );\n}\n\nexport default OwnershipTimeline;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,YAAY,KAAM,+BAA+B,CACxD,OAASC,mBAAmB,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzD,QAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAC3B,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAgB,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,GAAI,CAACR,UAAU,CAAE,CACfK,UAAU,CAAC,oBAAoB,CAAC,CAChC,OACF,CACAE,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAE,OAAO,CAAG,KAAM,CAAAf,mBAAmB,CAACgB,MAAM,CAACV,UAAU,CAAC,CAAC,CAC7DG,UAAU,CAACM,OAAO,CAAC,CACnBJ,UAAU,CAAC,EAAE,CAAC,CAChB,CAAE,MAAOM,KAAK,CAAE,CACdR,UAAU,CAAC,EAAE,CAAC,CACdE,UAAU,CAACM,KAAK,CAACP,OAAO,EAAI,mCAAmC,CAAC,CAClE,CAAC,OAAS,CACRG,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACET,KAAA,QAAKc,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjB,IAAA,CAACH,YAAY,GAAE,CAAC,cAChBK,KAAA,YAASc,SAAS,CAAC,MAAM,CAAAC,QAAA,eACvBjB,IAAA,OAAAiB,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BjB,IAAA,UACEkB,IAAI,CAAC,QAAQ,CACbC,GAAG,CAAC,GAAG,CACPC,WAAW,CAAC,aAAa,CACzBC,KAAK,CAAEjB,UAAW,CAClBkB,QAAQ,CAAGC,CAAC,EAAKlB,aAAa,CAACkB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChD,CAAC,cACFrB,IAAA,WAAQyB,OAAO,CAAEb,iBAAkB,CAACc,QAAQ,CAAEhB,OAAQ,CAAAO,QAAA,CACnDP,OAAO,CAAG,YAAY,CAAG,eAAe,CACnC,CAAC,CACRF,OAAO,cAAGR,IAAA,MAAGgB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAET,OAAO,CAAI,CAAC,CAAG,IAAI,CACrDF,OAAO,CAACqB,MAAM,CAAG,CAAC,cACjB3B,IAAA,OAAIgB,SAAS,CAAC,UAAU,CAAAC,QAAA,CACrBX,OAAO,CAACsB,GAAG,CAAC,CAACC,MAAM,CAAEC,KAAK,gBACzB5B,KAAA,OAAAe,QAAA,eACEf,KAAA,MAAAe,QAAA,EAAG,SACM,cAAAjB,IAAA,SAAAiB,QAAA,CAAOY,MAAM,CAACE,KAAK,CAAO,CAAC,EACjC,CAAC,cACJ7B,KAAA,MAAAe,QAAA,EAAG,aAAW,CAACY,MAAM,CAACG,YAAY,EAAI,CAAC,MAAAC,MAAA,CAJ7BJ,MAAM,CAACE,KAAK,MAAAE,MAAA,CAAIJ,MAAM,CAACK,SAAS,MAAAD,MAAA,CAAIH,KAAK,CAKjD,CACL,CAAC,CACA,CAAC,cAEL9B,IAAA,MAAAiB,QAAA,CAAG,qCAAmC,CAAG,CAC1C,EACM,CAAC,EACP,CAAC,CAEV,CAEA,cAAe,CAAAd,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}