{"ast":null,"code":"import { ensureContractCode, ensureCorrectNetwork, ensureWalletConnected, getBrowserProvider, getWriteContract } from \"./eth.js\";\nexport default async function storeOnBlockchain(hash) {\n  if (!hash) {\n    throw new Error(\"Hash is required to store on-chain\");\n  }\n  try {\n    const provider = await getBrowserProvider();\n    await ensureWalletConnected(provider);\n    await ensureCorrectNetwork(provider);\n    await ensureContractCode(provider);\n    const signer = await provider.getSigner();\n    const contract = getWriteContract(signer);\n    const tx = await contract.storeHash(hash);\n    const receipt = await tx.wait();\n    return {\n      txHash: tx.hash,\n      blockNumber: receipt === null || receipt === void 0 ? void 0 : receipt.blockNumber\n    };\n  } catch (error) {\n    throw new Error((error === null || error === void 0 ? void 0 : error.reason) || (error === null || error === void 0 ? void 0 : error.message) || \"Failed to store hash on blockchain\");\n  }\n}","map":{"version":3,"names":["ensureContractCode","ensureCorrectNetwork","ensureWalletConnected","getBrowserProvider","getWriteContract","storeOnBlockchain","hash","Error","provider","signer","getSigner","contract","tx","storeHash","receipt","wait","txHash","blockNumber","error","reason","message"],"sources":["C:/Users/ahmad/OneDrive/Desktop/evault/frontend/src/contract/storeOnBlockchain.js"],"sourcesContent":["import {\r\n  ensureContractCode,\r\n  ensureCorrectNetwork,\r\n  ensureWalletConnected,\r\n  getBrowserProvider,\r\n  getWriteContract,\r\n} from \"./eth.js\";\r\n\r\nexport default async function storeOnBlockchain(hash) {\r\n  if (!hash) {\r\n    throw new Error(\"Hash is required to store on-chain\");\r\n  }\r\n\r\n  try {\r\n    const provider = await getBrowserProvider();\r\n    await ensureWalletConnected(provider);\r\n    await ensureCorrectNetwork(provider);\r\n    await ensureContractCode(provider);\r\n\r\n    const signer = await provider.getSigner();\r\n    const contract = getWriteContract(signer);\r\n    const tx = await contract.storeHash(hash);\r\n    const receipt = await tx.wait();\r\n\r\n    return { txHash: tx.hash, blockNumber: receipt?.blockNumber };\r\n  } catch (error) {\r\n    throw new Error(\r\n      error?.reason ||\r\n        error?.message ||\r\n        \"Failed to store hash on blockchain\"\r\n    );\r\n  }\r\n}\r\n"],"mappings":"AAAA,SACEA,kBAAkB,EAClBC,oBAAoB,EACpBC,qBAAqB,EACrBC,kBAAkB,EAClBC,gBAAgB,QACX,UAAU;AAEjB,eAAe,eAAeC,iBAAiBA,CAACC,IAAI,EAAE;EACpD,IAAI,CAACA,IAAI,EAAE;IACT,MAAM,IAAIC,KAAK,CAAC,oCAAoC,CAAC;EACvD;EAEA,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAML,kBAAkB,CAAC,CAAC;IAC3C,MAAMD,qBAAqB,CAACM,QAAQ,CAAC;IACrC,MAAMP,oBAAoB,CAACO,QAAQ,CAAC;IACpC,MAAMR,kBAAkB,CAACQ,QAAQ,CAAC;IAElC,MAAMC,MAAM,GAAG,MAAMD,QAAQ,CAACE,SAAS,CAAC,CAAC;IACzC,MAAMC,QAAQ,GAAGP,gBAAgB,CAACK,MAAM,CAAC;IACzC,MAAMG,EAAE,GAAG,MAAMD,QAAQ,CAACE,SAAS,CAACP,IAAI,CAAC;IACzC,MAAMQ,OAAO,GAAG,MAAMF,EAAE,CAACG,IAAI,CAAC,CAAC;IAE/B,OAAO;MAAEC,MAAM,EAAEJ,EAAE,CAACN,IAAI;MAAEW,WAAW,EAAEH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG;IAAY,CAAC;EAC/D,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAM,IAAIX,KAAK,CACb,CAAAW,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEC,MAAM,MACXD,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEE,OAAO,KACd,oCACJ,CAAC;EACH;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}