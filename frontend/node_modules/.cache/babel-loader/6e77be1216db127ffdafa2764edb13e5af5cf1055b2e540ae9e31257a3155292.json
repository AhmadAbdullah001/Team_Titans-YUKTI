{"ast":null,"code":"import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=\"http://localhost:5000\";function UserLookup(){const navigate=useNavigate();const role=String(localStorage.getItem(\"role\")||\"\").toLowerCase();const[wallet,setWallet]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const[user,setUser]=useState(null);const logout=()=>{localStorage.removeItem(\"user\");localStorage.removeItem(\"role\");localStorage.removeItem(\"walletAddress\");navigate(\"/login\",{replace:true});};const search=async()=>{const value=String(wallet||\"\").trim();if(!value){setError(\"Enter wallet address first.\");setUser(null);return;}try{setLoading(true);setError(\"\");setUser(null);const response=await fetch(\"\".concat(API_BASE,\"/api/auth/user-by-wallet/\").concat(encodeURIComponent(value),\"?role=\").concat(encodeURIComponent(role)),{headers:{\"x-role\":role}});const data=await response.json();if(!response.ok){throw new Error((data===null||data===void 0?void 0:data.error)||\"Failed to fetch user details\");}setUser((data===null||data===void 0?void 0:data.user)||null);}catch(e){setError((e===null||e===void 0?void 0:e.message)||\"Failed to fetch user details\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-slate-100 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-4xl space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-xl bg-white p-6 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-slate-800\",children:\"User Lookup\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"Search user details by wallet address.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700\",children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"rounded-xl bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700\",children:\"Logout\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl bg-white p-6 shadow-xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3 sm:flex-row\",children:[/*#__PURE__*/_jsx(\"input\",{value:wallet,onChange:e=>setWallet(e.target.value),placeholder:\"Enter wallet address\",className:\"w-full rounded-xl border border-slate-300 px-4 py-3 text-sm outline-none focus:border-blue-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:search,disabled:loading,className:\"rounded-xl px-5 py-3 text-sm font-semibold text-white \".concat(loading?\"cursor-not-allowed bg-slate-400\":\"bg-indigo-600 hover:bg-indigo-700\"),children:loading?\"Searching...\":\"Search\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-sm text-rose-700\",children:error}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-700\",children:[\"Name: \",/*#__PURE__*/_jsx(\"strong\",{children:user.name||\"-\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-sm text-slate-700\",children:[\"Role: \",/*#__PURE__*/_jsx(\"strong\",{children:user.role||\"-\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-sm text-slate-700\",children:[\"Aadhaar: \",/*#__PURE__*/_jsx(\"strong\",{children:user.aadhaar||\"-\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-sm text-slate-700\",children:[\"Employee ID: \",/*#__PURE__*/_jsx(\"strong\",{children:user.employeeId||\"-\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 break-all font-mono text-xs text-slate-700\",children:[\"Wallet: \",user.walletAddress||\"-\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-xs text-slate-600\",children:[\"Created: \",user.createdAt?new Date(user.createdAt).toLocaleString():\"-\"]})]})]})]})});}export default UserLookup;","map":{"version":3,"names":["React","useState","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","API_BASE","UserLookup","navigate","role","String","localStorage","getItem","toLowerCase","wallet","setWallet","loading","setLoading","error","setError","user","setUser","logout","removeItem","replace","search","value","trim","response","fetch","concat","encodeURIComponent","headers","data","json","ok","Error","e","message","className","children","to","onClick","onChange","target","placeholder","disabled","name","aadhaar","employeeId","walletAddress","createdAt","Date","toLocaleString"],"sources":["C:/Users/ahmad/OneDrive/Desktop/evault/frontend/src/pages/UserLookup.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst API_BASE = \"http://localhost:5000\";\n\nfunction UserLookup() {\n  const navigate = useNavigate();\n  const role = String(localStorage.getItem(\"role\") || \"\").toLowerCase();\n  const [wallet, setWallet] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [user, setUser] = useState(null);\n\n  const logout = () => {\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"role\");\n    localStorage.removeItem(\"walletAddress\");\n    navigate(\"/login\", { replace: true });\n  };\n\n  const search = async () => {\n    const value = String(wallet || \"\").trim();\n    if (!value) {\n      setError(\"Enter wallet address first.\");\n      setUser(null);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(\"\");\n      setUser(null);\n\n      const response = await fetch(\n        `${API_BASE}/api/auth/user-by-wallet/${encodeURIComponent(value)}?role=${encodeURIComponent(role)}`,\n        { headers: { \"x-role\": role } }\n      );\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data?.error || \"Failed to fetch user details\");\n      }\n\n      setUser(data?.user || null);\n    } catch (e) {\n      setError(e?.message || \"Failed to fetch user details\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-100 p-4\">\n      <div className=\"mx-auto max-w-4xl space-y-6\">\n        <div className=\"rounded-xl bg-white p-6 shadow-xl\">\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-slate-800\">User Lookup</h1>\n              <p className=\"text-sm text-slate-500\">Search user details by wallet address.</p>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Link\n                to=\"/home\"\n                className=\"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700\"\n              >\n                Back\n              </Link>\n              <button\n                onClick={logout}\n                className=\"rounded-xl bg-rose-600 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-700\"\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"rounded-xl bg-white p-6 shadow-xl\">\n          <div className=\"flex flex-col gap-3 sm:flex-row\">\n            <input\n              value={wallet}\n              onChange={(e) => setWallet(e.target.value)}\n              placeholder=\"Enter wallet address\"\n              className=\"w-full rounded-xl border border-slate-300 px-4 py-3 text-sm outline-none focus:border-blue-500\"\n            />\n            <button\n              onClick={search}\n              disabled={loading}\n              className={`rounded-xl px-5 py-3 text-sm font-semibold text-white ${\n                loading ? \"cursor-not-allowed bg-slate-400\" : \"bg-indigo-600 hover:bg-indigo-700\"\n              }`}\n            >\n              {loading ? \"Searching...\" : \"Search\"}\n            </button>\n          </div>\n\n          {error && <p className=\"mt-3 text-sm text-rose-700\">{error}</p>}\n\n          {user && (\n            <div className=\"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4\">\n              <p className=\"text-sm text-slate-700\">Name: <strong>{user.name || \"-\"}</strong></p>\n              <p className=\"mt-2 text-sm text-slate-700\">Role: <strong>{user.role || \"-\"}</strong></p>\n              <p className=\"mt-2 text-sm text-slate-700\">Aadhaar: <strong>{user.aadhaar || \"-\"}</strong></p>\n              <p className=\"mt-2 text-sm text-slate-700\">\n                Employee ID: <strong>{user.employeeId || \"-\"}</strong>\n              </p>\n              <p className=\"mt-2 break-all font-mono text-xs text-slate-700\">\n                Wallet: {user.walletAddress || \"-\"}\n              </p>\n              <p className=\"mt-2 text-xs text-slate-600\">\n                Created: {user.createdAt ? new Date(user.createdAt).toLocaleString() : \"-\"}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UserLookup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}