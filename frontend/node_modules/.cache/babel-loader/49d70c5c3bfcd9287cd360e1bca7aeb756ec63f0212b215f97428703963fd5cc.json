{"ast":null,"code":"import _objectSpread from\"C:/Users/ahmad/OneDrive/Desktop/evault/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{approvePropertyOnChain,getWalletRoleOnChain,grantRegistrarOnChain,propertyExistsOnChain,verifyPropertyOnChain}from\"../contract/propertyActions.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=\"http://localhost:5000\";async function parseJsonSafe(response){const contentType=response.headers.get(\"content-type\")||\"\";if(!contentType.includes(\"application/json\")){const text=await response.text();throw new Error(\"API did not return JSON. Response started with: \".concat(text.slice(0,40)));}return response.json();}function RegistrarDashboard(){const navigate=useNavigate();const[files,setFiles]=useState([]);const[loading,setLoading]=useState(false);const[actionMessage,setActionMessage]=useState(\"\");const[processingHash,setProcessingHash]=useState(\"\");const[walletInfo,setWalletInfo]=useState({wallet:\"\",adminAddress:\"\",isRegistrar:false,isAdmin:false});const[granting,setGranting]=useState(false);const[grantAddress,setGrantAddress]=useState(\"\");const logout=()=>{localStorage.removeItem(\"user\");localStorage.removeItem(\"role\");navigate(\"/login\",{replace:true});};const loadFiles=async()=>{setLoading(true);try{var _data2;let response=await fetch(\"\".concat(API_BASE,\"/api/files?role=registrar\"),{headers:{\"x-role\":\"registrar\"}});let data;try{data=await parseJsonSafe(response);}catch(_unused){// Backward-compatible fallback to existing upload listing endpoint.\nresponse=await fetch(\"\".concat(API_BASE,\"/api/upload/all\"));data=await parseJsonSafe(response);}if(!response.ok){var _data;throw new Error(((_data=data)===null||_data===void 0?void 0:_data.message)||\"Failed to fetch files\");}const rows=Array.isArray((_data2=data)===null||_data2===void 0?void 0:_data2.files)?data.files:[];const withStatus=await Promise.all(rows.map(async item=>{let existsOnChain=null;let verifiedOnChain=false;try{existsOnChain=await propertyExistsOnChain(item.ipfshash);}catch(_unused2){existsOnChain=null;}try{verifiedOnChain=await verifyPropertyOnChain(item.ipfshash);}catch(_unused3){verifiedOnChain=false;}return _objectSpread(_objectSpread({},item),{},{existsOnChain,verifiedOnChain:Boolean(verifiedOnChain)});}));setFiles(withStatus);}catch(error){setActionMessage((error===null||error===void 0?void 0:error.message)||\"Failed to load files. Ensure backend is running on http://localhost:5000.\");}finally{setLoading(false);}};const loadWalletRole=async()=>{try{const info=await getWalletRoleOnChain();setWalletInfo(info);setGrantAddress(info.wallet||\"\");if(!info.isRegistrar){setActionMessage(\"Connected wallet \".concat(info.wallet,\" is not registrar on-chain. Approval will fail until added by admin.\"));}}catch(error){setActionMessage((error===null||error===void 0?void 0:error.message)||\"Failed to read wallet role from blockchain.\");}};useEffect(()=>{loadWalletRole();loadFiles();},[]);const approve=async hash=>{try{setProcessingHash(hash);setActionMessage(\"Approving property on blockchain...\");await approvePropertyOnChain(hash);await fetch(\"\".concat(API_BASE,\"/api/files/verify\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\",\"x-role\":\"registrar\"},body:JSON.stringify({hash,role:\"registrar\",verifiedBy:walletInfo.wallet||null})});setActionMessage(\"Property approved successfully.\");setFiles(prev=>prev.map(item=>item.ipfshash===hash?_objectSpread(_objectSpread({},item),{},{existsOnChain:true,verifiedOnChain:true,verified:true,verifiedAt:new Date().toISOString(),verifiedBy:walletInfo.wallet||item.verifiedBy}):item));}catch(error){const message=String((error===null||error===void 0?void 0:error.message)||\"\");if(message.includes(\"Property not found\")){setActionMessage(\"Property hash not registered on blockchain. Citizen must upload/register hash first.\");}else{setActionMessage(message||\"Approval failed\");}}finally{setProcessingHash(\"\");}};const grantRegistrar=async()=>{try{if(!grantAddress){setActionMessage(\"Enter a wallet address to grant registrar role.\");return;}setGranting(true);setActionMessage(\"Granting registrar role on-chain...\");await grantRegistrarOnChain(grantAddress.trim());if(grantAddress.trim().toLowerCase()===walletInfo.wallet.toLowerCase()){setWalletInfo(prev=>_objectSpread(_objectSpread({},prev),{},{isRegistrar:true}));}setActionMessage(\"Registrar role granted to \".concat(grantAddress.trim(),\".\"));}catch(error){setActionMessage((error===null||error===void 0?void 0:error.message)||\"Failed to grant registrar role.\");}finally{setGranting(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-slate-100 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-6xl space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-xl bg-white p-6 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-slate-800\",children:\"Registrar Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500\",children:\"Review documents and approve property titles.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"rounded-xl bg-rose-600 px-4 py-2 text-sm font-semibold text-white shadow-xl hover:bg-rose-700\",children:\"Logout\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl bg-white p-6 shadow-xl transition hover:shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-slate-800\",children:\"Approval Card\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Wallet: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-mono\",children:walletInfo.wallet||\"-\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Admin: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-mono\",children:walletInfo.adminAddress||\"-\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"On-chain registrar: \",walletInfo.isRegistrar?\"Yes\":\"No\"]}),walletInfo.isAdmin&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex flex-col gap-2 sm:flex-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:grantAddress,onChange:e=>setGrantAddress(e.target.value),placeholder:\"Wallet to grant registrar role\",className:\"w-full rounded-lg border border-slate-300 px-3 py-1.5 text-xs outline-none focus:border-indigo-500\"}),/*#__PURE__*/_jsx(\"button\",{onClick:grantRegistrar,disabled:granting,className:\"rounded-lg px-3 py-1.5 text-xs font-semibold text-white \".concat(granting?\"cursor-not-allowed bg-slate-400\":\"bg-indigo-600 hover:bg-indigo-700\"),children:granting?\"Granting...\":\"Grant Registrar\"})]})]}),actionMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-slate-700\",children:actionMessage}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-slate-500\",children:\"Loading documents...\"}):files.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-slate-500\",children:\"No uploaded files found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-slate-200\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-xs uppercase text-slate-600\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2\",children:\"File\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2\",children:\"Owner ID\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2\",children:\"Hash\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-slate-100\",children:files.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-slate-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-sm text-slate-800\",children:item.filename}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-sm text-slate-700\",children:item.userID}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 font-mono text-xs text-slate-600\",children:item.ipfshash}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:item.verified||item.verifiedOnChain?\"text-emerald-700 font-medium\":item.existsOnChain===false?\"text-rose-700 font-medium\":item.existsOnChain?\"text-amber-700 font-medium\":\"text-amber-700 font-medium\",children:item.verified||item.verifiedOnChain?\"Verified\":item.existsOnChain===false?\"Not Registered\":\"Pending Approval\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>approve(item.ipfshash),disabled:item.existsOnChain===false||item.verified||item.verifiedOnChain||processingHash===item.ipfshash||!walletInfo.isRegistrar,className:\"rounded-lg px-3 py-1.5 text-xs font-semibold text-white \".concat(item.existsOnChain===false||item.verified||item.verifiedOnChain||processingHash===item.ipfshash||!walletInfo.isRegistrar?\"cursor-not-allowed bg-slate-400\":\"bg-amber-600 hover:bg-amber-700\"),title:item.existsOnChain===false?\"Hash is missing on blockchain\":\"\",children:item.existsOnChain===false?\"Missing On-Chain\":processingHash===item.ipfshash?\"Approving...\":\"Approve\"})})]},item._id))})]})})]})]})});}export default RegistrarDashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","approvePropertyOnChain","getWalletRoleOnChain","grantRegistrarOnChain","propertyExistsOnChain","verifyPropertyOnChain","jsx","_jsx","jsxs","_jsxs","API_BASE","parseJsonSafe","response","contentType","headers","get","includes","text","Error","concat","slice","json","RegistrarDashboard","navigate","files","setFiles","loading","setLoading","actionMessage","setActionMessage","processingHash","setProcessingHash","walletInfo","setWalletInfo","wallet","adminAddress","isRegistrar","isAdmin","granting","setGranting","grantAddress","setGrantAddress","logout","localStorage","removeItem","replace","loadFiles","_data2","fetch","data","_unused","ok","_data","message","rows","Array","isArray","withStatus","Promise","all","map","item","existsOnChain","verifiedOnChain","ipfshash","_unused2","_unused3","_objectSpread","Boolean","error","loadWalletRole","info","approve","hash","method","body","JSON","stringify","role","verifiedBy","prev","verified","verifiedAt","Date","toISOString","String","grantRegistrar","trim","toLowerCase","className","children","onClick","type","value","onChange","e","target","placeholder","disabled","length","filename","userID","title","_id"],"sources":["C:/Users/ahmad/OneDrive/Desktop/evault/frontend/src/pages/RegistrarDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  approvePropertyOnChain,\n  getWalletRoleOnChain,\n  grantRegistrarOnChain,\n  propertyExistsOnChain,\n  verifyPropertyOnChain,\n} from \"../contract/propertyActions.js\";\n\nconst API_BASE = \"http://localhost:5000\";\n\nasync function parseJsonSafe(response) {\n  const contentType = response.headers.get(\"content-type\") || \"\";\n  if (!contentType.includes(\"application/json\")) {\n    const text = await response.text();\n    throw new Error(\n      `API did not return JSON. Response started with: ${text.slice(0, 40)}`\n    );\n  }\n  return response.json();\n}\n\nfunction RegistrarDashboard() {\n  const navigate = useNavigate();\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [actionMessage, setActionMessage] = useState(\"\");\n  const [processingHash, setProcessingHash] = useState(\"\");\n  const [walletInfo, setWalletInfo] = useState({\n    wallet: \"\",\n    adminAddress: \"\",\n    isRegistrar: false,\n    isAdmin: false,\n  });\n  const [granting, setGranting] = useState(false);\n  const [grantAddress, setGrantAddress] = useState(\"\");\n\n  const logout = () => {\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"role\");\n    navigate(\"/login\", { replace: true });\n  };\n\n  const loadFiles = async () => {\n    setLoading(true);\n    try {\n      let response = await fetch(`${API_BASE}/api/files?role=registrar`, {\n        headers: { \"x-role\": \"registrar\" },\n      });\n      let data;\n\n      try {\n        data = await parseJsonSafe(response);\n      } catch {\n        // Backward-compatible fallback to existing upload listing endpoint.\n        response = await fetch(`${API_BASE}/api/upload/all`);\n        data = await parseJsonSafe(response);\n      }\n\n      if (!response.ok) {\n        throw new Error(data?.message || \"Failed to fetch files\");\n      }\n\n      const rows = Array.isArray(data?.files) ? data.files : [];\n      const withStatus = await Promise.all(\n        rows.map(async (item) => {\n          let existsOnChain = null;\n          let verifiedOnChain = false;\n\n          try {\n            existsOnChain = await propertyExistsOnChain(item.ipfshash);\n          } catch {\n            existsOnChain = null;\n          }\n\n          try {\n            verifiedOnChain = await verifyPropertyOnChain(item.ipfshash);\n          } catch {\n            verifiedOnChain = false;\n          }\n\n          return {\n            ...item,\n            existsOnChain,\n            verifiedOnChain: Boolean(verifiedOnChain),\n          };\n        })\n      );\n      setFiles(withStatus);\n    } catch (error) {\n      setActionMessage(\n        error?.message ||\n          \"Failed to load files. Ensure backend is running on http://localhost:5000.\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadWalletRole = async () => {\n    try {\n      const info = await getWalletRoleOnChain();\n      setWalletInfo(info);\n      setGrantAddress(info.wallet || \"\");\n      if (!info.isRegistrar) {\n        setActionMessage(\n          `Connected wallet ${info.wallet} is not registrar on-chain. Approval will fail until added by admin.`\n        );\n      }\n    } catch (error) {\n      setActionMessage(error?.message || \"Failed to read wallet role from blockchain.\");\n    }\n  };\n\n  useEffect(() => {\n    loadWalletRole();\n    loadFiles();\n  }, []);\n\n  const approve = async (hash) => {\n    try {\n      setProcessingHash(hash);\n      setActionMessage(\"Approving property on blockchain...\");\n      await approvePropertyOnChain(hash);\n\n      await fetch(`${API_BASE}/api/files/verify`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\", \"x-role\": \"registrar\" },\n        body: JSON.stringify({\n          hash,\n          role: \"registrar\",\n          verifiedBy: walletInfo.wallet || null,\n        }),\n      });\n\n      setActionMessage(\"Property approved successfully.\");\n      setFiles((prev) =>\n        prev.map((item) =>\n          item.ipfshash === hash\n            ? {\n                ...item,\n                existsOnChain: true,\n                verifiedOnChain: true,\n                verified: true,\n                verifiedAt: new Date().toISOString(),\n                verifiedBy: walletInfo.wallet || item.verifiedBy,\n              }\n            : item\n        )\n      );\n    } catch (error) {\n      const message = String(error?.message || \"\");\n      if (message.includes(\"Property not found\")) {\n        setActionMessage(\n          \"Property hash not registered on blockchain. Citizen must upload/register hash first.\"\n        );\n      } else {\n        setActionMessage(message || \"Approval failed\");\n      }\n    } finally {\n      setProcessingHash(\"\");\n    }\n  };\n\n  const grantRegistrar = async () => {\n    try {\n      if (!grantAddress) {\n        setActionMessage(\"Enter a wallet address to grant registrar role.\");\n        return;\n      }\n      setGranting(true);\n      setActionMessage(\"Granting registrar role on-chain...\");\n      await grantRegistrarOnChain(grantAddress.trim());\n      if (grantAddress.trim().toLowerCase() === walletInfo.wallet.toLowerCase()) {\n        setWalletInfo((prev) => ({ ...prev, isRegistrar: true }));\n      }\n      setActionMessage(`Registrar role granted to ${grantAddress.trim()}.`);\n    } catch (error) {\n      setActionMessage(error?.message || \"Failed to grant registrar role.\");\n    } finally {\n      setGranting(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-100 p-4\">\n      <div className=\"mx-auto max-w-6xl space-y-6\">\n        <div className=\"rounded-xl bg-white p-6 shadow-xl\">\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-slate-800\">Registrar Dashboard</h1>\n              <p className=\"text-sm text-slate-500\">Review documents and approve property titles.</p>\n            </div>\n            <button\n              onClick={logout}\n              className=\"rounded-xl bg-rose-600 px-4 py-2 text-sm font-semibold text-white shadow-xl hover:bg-rose-700\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n\n        <div className=\"rounded-xl bg-white p-6 shadow-xl transition hover:shadow-2xl\">\n          <h2 className=\"text-lg font-semibold text-slate-800\">Approval Card</h2>\n          <div className=\"mt-2 rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700\">\n            <p>Wallet: <span className=\"font-mono\">{walletInfo.wallet || \"-\"}</span></p>\n            <p>Admin: <span className=\"font-mono\">{walletInfo.adminAddress || \"-\"}</span></p>\n            <p>On-chain registrar: {walletInfo.isRegistrar ? \"Yes\" : \"No\"}</p>\n            {walletInfo.isAdmin && (\n              <div className=\"mt-3 flex flex-col gap-2 sm:flex-row\">\n                <input\n                  type=\"text\"\n                  value={grantAddress}\n                  onChange={(e) => setGrantAddress(e.target.value)}\n                  placeholder=\"Wallet to grant registrar role\"\n                  className=\"w-full rounded-lg border border-slate-300 px-3 py-1.5 text-xs outline-none focus:border-indigo-500\"\n                />\n                <button\n                  onClick={grantRegistrar}\n                  disabled={granting}\n                  className={`rounded-lg px-3 py-1.5 text-xs font-semibold text-white ${\n                    granting ? \"cursor-not-allowed bg-slate-400\" : \"bg-indigo-600 hover:bg-indigo-700\"\n                  }`}\n                >\n                  {granting ? \"Granting...\" : \"Grant Registrar\"}\n                </button>\n              </div>\n            )}\n          </div>\n          {actionMessage && <p className=\"mt-2 text-sm text-slate-700\">{actionMessage}</p>}\n          {loading ? (\n            <p className=\"mt-4 text-sm text-slate-500\">Loading documents...</p>\n          ) : files.length === 0 ? (\n            <p className=\"mt-4 text-sm text-slate-500\">No uploaded files found.</p>\n          ) : (\n            <div className=\"mt-4 overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-slate-200\">\n                <thead>\n                  <tr className=\"text-left text-xs uppercase text-slate-600\">\n                    <th className=\"px-3 py-2\">File</th>\n                    <th className=\"px-3 py-2\">Owner ID</th>\n                    <th className=\"px-3 py-2\">Hash</th>\n                    <th className=\"px-3 py-2\">Status</th>\n                    <th className=\"px-3 py-2\">Action</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-100\">\n                  {files.map((item) => (\n                    <tr key={item._id} className=\"hover:bg-slate-50\">\n                      <td className=\"px-3 py-2 text-sm text-slate-800\">{item.filename}</td>\n                      <td className=\"px-3 py-2 text-sm text-slate-700\">{item.userID}</td>\n                      <td className=\"px-3 py-2 font-mono text-xs text-slate-600\">{item.ipfshash}</td>\n                      <td className=\"px-3 py-2 text-sm\">\n                        <span\n                          className={\n                            item.verified || item.verifiedOnChain\n                              ? \"text-emerald-700 font-medium\"\n                              : item.existsOnChain === false\n                              ? \"text-rose-700 font-medium\"\n                              : item.existsOnChain\n                              ? \"text-amber-700 font-medium\"\n                              : \"text-amber-700 font-medium\"\n                          }\n                        >\n                          {item.verified || item.verifiedOnChain\n                            ? \"Verified\"\n                            : item.existsOnChain === false\n                            ? \"Not Registered\"\n                            : \"Pending Approval\"}\n                        </span>\n                      </td>\n                      <td className=\"px-3 py-2\">\n                        <button\n                          onClick={() => approve(item.ipfshash)}\n                          disabled={\n                            item.existsOnChain === false ||\n                            item.verified ||\n                            item.verifiedOnChain ||\n                            processingHash === item.ipfshash ||\n                            !walletInfo.isRegistrar\n                          }\n                          className={`rounded-lg px-3 py-1.5 text-xs font-semibold text-white ${\n                            item.existsOnChain === false ||\n                            item.verified ||\n                            item.verifiedOnChain ||\n                            processingHash === item.ipfshash ||\n                            !walletInfo.isRegistrar\n                              ? \"cursor-not-allowed bg-slate-400\"\n                              : \"bg-amber-600 hover:bg-amber-700\"\n                          }`}\n                          title={item.existsOnChain === false ? \"Hash is missing on blockchain\" : \"\"}\n                        >\n                          {item.existsOnChain === false\n                            ? \"Missing On-Chain\"\n                            : processingHash === item.ipfshash\n                            ? \"Approving...\"\n                            : \"Approve\"}\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default RegistrarDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}